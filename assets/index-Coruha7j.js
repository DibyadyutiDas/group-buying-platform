import{r as We,a as qe}from"./vendor-DavUf6mE.js";import{r as x,a as Ve,u as ce,L as E,N as Pe,b as $,c as He,B as ze,R as Ge,d as U}from"./router-BlAZegdo.js";import{X as z,I as ie,A as Ee,a as Z,C as Je,M as Ye,S as Ke,b as Qe,c as Xe,B as Ze,W as Ce,d as Te,e as F,U as ye,f as et,F as tt,T as rt,g as st,h as ee,R as at,H as ot,i as pe,Z as nt,j as _,k as it,l as De,m as fe,n as lt,o as dt,p as ct,q as mt,D as xt,P as ut,r as G,s as gt,t as le,u as ht,v as yt,w as pt,E as ft,x as bt,L as jt,y as wt,K as be}from"./ui-D5ZZsn45.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const r of a)if(r.type==="childList")for(const l of r.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function s(a){const r={};return a.integrity&&(r.integrity=a.integrity),a.referrerPolicy&&(r.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?r.credentials="include":a.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(a){if(a.ep)return;a.ep=!0;const r=s(a);fetch(a.href,r)}})();var ne={exports:{}},H={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var je;function vt(){if(je)return H;je=1;var t=We(),o=Symbol.for("react.element"),s=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,a=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,r={key:!0,ref:!0,__self:!0,__source:!0};function l(c,n,d){var m,y={},N=null,v=null;d!==void 0&&(N=""+d),n.key!==void 0&&(N=""+n.key),n.ref!==void 0&&(v=n.ref);for(m in n)i.call(n,m)&&!r.hasOwnProperty(m)&&(y[m]=n[m]);if(c&&c.defaultProps)for(m in n=c.defaultProps,n)y[m]===void 0&&(y[m]=n[m]);return{$$typeof:o,type:c,key:N,ref:v,props:y,_owner:a.current}}return H.Fragment=s,H.jsx=l,H.jsxs=l,H}var we;function Nt(){return we||(we=1,ne.exports=vt()),ne.exports}var e=Nt(),Q={},ve;function kt(){if(ve)return Q;ve=1;var t=qe();return Q.createRoot=t.createRoot,Q.hydrateRoot=t.hydrateRoot,Q}var St=kt();const Pt=[{id:"1",name:"John Doe",email:"john@example.com",avatar:"https://i.pravatar.cc/150?img=1"},{id:"2",name:"Jane Smith",email:"jane@example.com",avatar:"https://i.pravatar.cc/150?img=2"}],Et=[{id:"1",title:"Apple MacBook Pro M2",description:"Latest Apple MacBook Pro with M2 chip, 16GB RAM, and 512GB SSD",price:1999.99,image:"https://images.pexels.com/photos/303383/pexels-photo-303383.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1",category:"Electronics",estimatedPurchaseDate:"2025-06-15",createdBy:"1",createdAt:new Date().toISOString(),interestedUsers:["2"]},{id:"2",title:"Sony WH-1000XM5 Headphones",description:"Wireless Noise Cancelling Headphones with Auto Noise Cancelling Optimizer",price:349.99,image:"https://images.pexels.com/photos/577769/pexels-photo-577769.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1",category:"Electronics",estimatedPurchaseDate:"2025-05-20",createdBy:"2",createdAt:new Date().toISOString(),interestedUsers:["1"]},{id:"3",title:"Ergonomic Office Chair",description:"High-back ergonomic office chair with adjustable height and lumbar support",price:299.99,image:"https://images.pexels.com/photos/1957477/pexels-photo-1957477.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1",category:"Furniture",estimatedPurchaseDate:"2025-04-10",createdBy:"1",createdAt:new Date().toISOString(),interestedUsers:[]}],Ct=[{id:"1",productId:"1",userId:"1",text:"I'm planning to buy this next month. Anyone interested in joining?",createdAt:new Date().toISOString()},{id:"2",productId:"1",userId:"2",text:"I'm interested! How much discount do you think we could get?",createdAt:new Date().toISOString()}],te="bulkbuy_users",J="bulkbuy_products",Y="bulkbuy_comments",de="bulkbuy_current_user",me=()=>{localStorage.getItem(te)||localStorage.setItem(te,JSON.stringify(Pt)),localStorage.getItem(J)||localStorage.setItem(J,JSON.stringify(Et)),localStorage.getItem(Y)||localStorage.setItem(Y,JSON.stringify(Ct))},xe=()=>(me(),JSON.parse(localStorage.getItem(te)||"[]")),ue=t=>xe().find(s=>s.id===t),q=()=>{const t=localStorage.getItem(de);return t?JSON.parse(t):null},Ie=t=>{t?localStorage.setItem(de,JSON.stringify(t)):localStorage.removeItem(de)},Tt=(t,o,s)=>{const i=xe();if(i.some(r=>r.email===o))throw new Error("Email already registered");const a={id:(i.length+1).toString(),name:t,email:o,avatar:`https://i.pravatar.cc/150?img=${i.length+3}`};return localStorage.setItem(te,JSON.stringify([...i,a])),a},Dt=(t,o)=>{const i=xe().find(a=>a.email===t);if(!i)throw new Error("Invalid email or password");return Ie(i),i},It=()=>{Ie(null)},re=()=>(me(),JSON.parse(localStorage.getItem(J)||"[]")),Ot=t=>{const o=re(),s=q();if(!s)throw new Error("User not authenticated");const i={...t,id:(o.length+1).toString(),createdBy:s.id,createdAt:new Date().toISOString(),interestedUsers:[]};return localStorage.setItem(J,JSON.stringify([...o,i])),i},Rt=(t,o)=>{const s=re(),i=q();if(!i)throw new Error("User not authenticated");const a=s.map(r=>{if(r.id===t){const l=o?[...r.interestedUsers,i.id]:r.interestedUsers.filter(c=>c!==i.id);return{...r,interestedUsers:l}}return r});return localStorage.setItem(J,JSON.stringify(a)),a.find(r=>r.id===t)},At=t=>(me(),JSON.parse(localStorage.getItem(Y)||"[]").filter(s=>s.productId===t)),Bt=(t,o)=>{const s=JSON.parse(localStorage.getItem(Y)||"[]"),i=q();if(!i)throw new Error("User not authenticated");const a={id:(s.length+1).toString(),productId:t,userId:i.id,text:o,createdAt:new Date().toISOString()};return localStorage.setItem(Y,JSON.stringify([...s,a])),a},se="https://group-buying-platform.onrender.com";console.log("Environment:","production");console.log("API Base URL:",se);const I={AUTH:{LOGIN:"/api/auth/login",REGISTER:"/api/auth/register",VERIFY_EMAIL:"/api/auth/verify-email",RESEND_VERIFICATION_OTP:"/api/auth/resend-verification-otp",FORGOT_PASSWORD:"/api/auth/forgot-password",VERIFY_RESET_OTP:"/api/auth/verify-reset-otp",RESET_PASSWORD:"/api/auth/reset-password",LOGOUT:"/api/auth/logout",PROFILE:"/api/users/profile"},PRODUCTS:{GET_ALL:"/api/products",CREATE:"/api/products",GET_BY_ID:t=>`/api/products/${t}`,UPDATE:t=>`/api/products/${t}`,DELETE:t=>`/api/products/${t}`,TOGGLE_INTEREST:t=>`/api/products/${t}/interest`},COMMENTS:{GET_BY_PRODUCT:t=>`/api/comments/product/${t}`,CREATE:"/api/comments",UPDATE:t=>`/api/comments/${t}`,DELETE:t=>`/api/comments/${t}`,LIKE:t=>`/api/comments/${t}/like`},USERS:{GET_ALL:"/api/users",GET_BY_ID:t=>`/api/users/${t}`,GET_PROFILE:"/api/users/profile",UPDATE_PROFILE:"/api/users/profile",GET_STATS:t=>`/api/users/${t}/stats`,GET_PRODUCTS:t=>`/api/users/${t}/products`,GET_INTERESTED:t=>`/api/users/${t}/interested`,GET_ONLINE:"/api/users/online"}},O=async(t,o={})=>{try{const s=localStorage.getItem("token"),i={...o,headers:{"Content-Type":"application/json",...s&&{Authorization:`Bearer ${s}`},...o.headers}},a=`${se}${t}`;console.log("Making API call to:",a);const r=await fetch(a,i);if(!r.ok){let c=`API call failed: ${r.status} ${r.statusText}`;try{throw c=(await r.json()).message||c,r.status===401?(localStorage.removeItem("token"),new Error("Authentication required")):r.status===403?new Error("Access denied"):r.status===404?new Error("Resource not found"):new Error(c)}catch(n){throw n instanceof Error&&n.message!==c?n:new Error(c)}}return await r.json()}catch(s){throw console.error("API Call Error:",s),s instanceof TypeError&&s.message.includes("fetch")?(console.warn("Network error detected, falling back to local storage"),new Error("NETWORK_ERROR")):s}},Oe=async()=>{try{console.log("Checking backend health at:",`${se}/api/health`);const t=new AbortController,o=setTimeout(()=>t.abort(),3e4),s=await fetch(`${se}/api/health`,{method:"GET",headers:{"Content-Type":"application/json"},mode:"cors",cache:"no-cache",signal:t.signal});if(clearTimeout(o),console.log("Health check response status:",s.status),console.log("Health check response ok:",s.ok),s.ok){const i=await s.json();return console.log("Health check data:",i),!0}return!1}catch(t){return console.error("Backend health check failed:",t),console.error("Error details:",{name:t instanceof Error?t.name:"Unknown",message:t instanceof Error?t.message:String(t),stack:t instanceof Error?t.stack:void 0}),!1}},Ut=({id:t,type:o,title:s,message:i,duration:a=5e3,onClose:r})=>{const[l,c]=x.useState(!1),n=x.useCallback(()=>{c(!1),setTimeout(()=>r(t),300)},[t,r]);x.useEffect(()=>{if(c(!0),a>0){const y=setTimeout(()=>{n()},a);return()=>clearTimeout(y)}},[a,n]);const d=()=>{switch(o){case"success":return e.jsx(Je,{className:"w-5 h-5 text-green-500"});case"error":return e.jsx(Z,{className:"w-5 h-5 text-red-500"});case"warning":return e.jsx(Ee,{className:"w-5 h-5 text-yellow-500"});case"info":default:return e.jsx(ie,{className:"w-5 h-5 text-blue-500"})}},m=()=>{switch(o){case"success":return"bg-green-50 border-green-200 dark:bg-green-900/20 dark:border-green-800";case"error":return"bg-red-50 border-red-200 dark:bg-red-900/20 dark:border-red-800";case"warning":return"bg-yellow-50 border-yellow-200 dark:bg-yellow-900/20 dark:border-yellow-800";case"info":default:return"bg-blue-50 border-blue-200 dark:bg-blue-900/20 dark:border-blue-800"}};return e.jsx("div",{className:`
        transform transition-all duration-300 ease-in-out
        ${l?"translate-x-0 opacity-100":"translate-x-full opacity-0"}
        max-w-sm w-full bg-white dark:bg-gray-800 shadow-lg rounded-lg pointer-events-auto
        border ${m()}
      `,children:e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0",children:d()}),e.jsxs("div",{className:"ml-3 w-0 flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:s}),i&&e.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:i})]}),e.jsx("div",{className:"ml-4 flex-shrink-0 flex",children:e.jsx("button",{className:"inline-flex text-gray-400 hover:text-gray-500 dark:hover:text-gray-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",onClick:n,children:e.jsx(z,{className:"w-4 h-4"})})})]})})})},Re=x.createContext(void 0),_t=({children:t})=>{const[o,s]=x.useState([]),i=(m,y,N,v=5e3)=>{const u={id:Math.random().toString(36).substr(2,9),type:m,title:y,message:N,duration:v};s(g=>[...g,u])},a=m=>{s(y=>y.filter(N=>N.id!==m))},r=(m,y)=>i("success",m,y),l=(m,y)=>i("error",m,y),c=(m,y)=>i("info",m,y),n=(m,y)=>i("warning",m,y),d=()=>typeof document>"u"?null:Ve.createPortal(e.jsx("div",{className:"fixed top-4 right-4 z-50 space-y-2",children:o.map(m=>e.jsx(Ut,{id:m.id,type:m.type,title:m.title,message:m.message,duration:m.duration,onClose:a},m.id))}),document.body);return e.jsxs(Re.Provider,{value:{showToast:i,success:r,error:l,info:c,warning:n},children:[t,e.jsx(d,{})]})},K=()=>{const t=x.useContext(Re);if(t===void 0)throw new Error("useToast must be used within a ToastProvider");return t},Ae=x.createContext(void 0),Lt=({children:t})=>{const[o,s]=x.useState(null),[i,a]=x.useState(!0),[r,l]=x.useState(null),[c,n]=x.useState(!1),{success:d,error:m}=K();x.useEffect(()=>{(async()=>{try{const k=await Promise.race([Oe(),new Promise(f=>setTimeout(()=>f(!1),5e3))]);if(n(k),k){if(localStorage.getItem("token"))try{const w=await O(I.AUTH.PROFILE);s(w.user),console.log("User authenticated from backend")}catch{console.warn("Failed to get user from backend, falling back to local storage"),localStorage.removeItem("token");const w=q();w&&(s(w),console.log("User loaded from local storage"))}}else{console.log("Backend not available, using local storage");const f=q();f&&(s(f),console.log("User loaded from local storage (offline mode)"))}}catch(k){console.error("Auth initialization error:",k);const f=q();f&&s(f)}finally{a(!1)}})()},[]);const y=async(p,k)=>{try{if(a(!0),l(null),c)try{const w=await O(I.AUTH.LOGIN,{method:"POST",body:JSON.stringify({email:p,password:k})});localStorage.setItem("token",w.token),s(w.user),d("Login successful","Welcome back!");return}catch(w){if(console.warn("Backend login failed, trying local storage"),w instanceof Error&&!w.message.includes("NETWORK_ERROR"))throw w}const f=Dt(p,k);s(f),d("Login successful","Welcome back! (Offline mode)")}catch(f){const w=f.message;throw l(w),m("Login failed",w),f}finally{a(!1)}},N=async(p,k,f)=>{try{if(a(!0),l(null),c)try{const S=await O(I.AUTH.REGISTER,{method:"POST",body:JSON.stringify({name:p,email:k,password:f})});return S.requiresVerification?{requiresVerification:!0,userId:S.userId,email:S.email}:(S.token&&(localStorage.setItem("token",S.token),s(S.user),d("Registration successful","Welcome to BulkBuy!")),{requiresVerification:!1})}catch(S){if(S&&typeof S=="object"&&"requiresVerification"in S||(console.warn("Backend registration failed, trying local storage"),S instanceof Error&&!S.message.includes("NETWORK_ERROR")))throw S}const w=Tt(p,k,f);return s(w),d("Registration successful","Welcome to BulkBuy! (Offline mode)"),{requiresVerification:!1}}catch(w){const S=w instanceof Error?w.message:"Registration failed";throw l(S),m("Registration failed",S),w}finally{a(!1)}},v=async(p,k)=>{try{a(!0),l(null);const f=await O(I.AUTH.VERIFY_EMAIL,{method:"POST",body:JSON.stringify({email:p,otp:k})});localStorage.setItem("token",f.token),s(f.user),d("Email verified","Your account is now active!")}catch(f){const w=f.message;throw l(w),m("Verification failed",w),f}finally{a(!1)}},b=async p=>{try{a(!0),l(null),await O(I.AUTH.RESEND_VERIFICATION_OTP,{method:"POST",body:JSON.stringify({email:p})}),d("Code sent","A new verification code has been sent to your email")}catch(k){const f=k.message;throw l(f),m("Failed to send code",f),k}finally{a(!1)}},u=async p=>{try{a(!0),l(null),await O(I.AUTH.FORGOT_PASSWORD,{method:"POST",body:JSON.stringify({email:p})}),d("Reset code sent","Check your email for the password reset code")}catch(k){const f=k.message;throw l(f),m("Failed to send reset code",f),k}finally{a(!1)}},g=async(p,k)=>{try{return a(!0),l(null),{resetToken:(await O(I.AUTH.VERIFY_RESET_OTP,{method:"POST",body:JSON.stringify({email:p,otp:k})})).resetToken}}catch(f){const w=f.message;throw l(w),m("Invalid code",w),f}finally{a(!1)}},h=async(p,k,f)=>{try{a(!0),l(null),await O(I.AUTH.RESET_PASSWORD,{method:"POST",body:JSON.stringify({email:p,otp:k,newPassword:f})}),d("Password reset","Your password has been successfully reset")}catch(w){const S=w.message;throw l(S),m("Reset failed",S),w}finally{a(!1)}},j=()=>{try{O(I.AUTH.LOGOUT,{method:"POST"}).catch(p=>{console.error("Error calling logout API:",p)}),It(),s(null),l(null),d("Logged out successfully")}catch(p){console.error("Logout error:",p)}};return e.jsx(Ae.Provider,{value:{user:o,loading:i,login:y,register:N,verifyEmail:v,resendVerificationOTP:b,forgotPassword:u,verifyResetOTP:g,resetPassword:h,logout:j,error:r,isBackendAvailable:c},children:t})},B=()=>{const t=x.useContext(Ae);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t},Be=x.createContext(void 0),Ft=({children:t})=>{const[o,s]=x.useState([]),[i,a]=x.useState(!0),[r,l]=x.useState(null),[c,n]=x.useState(!1),{success:d,error:m}=K(),y=x.useCallback(async()=>{try{a(!0),l(null);const b=await Oe();if(n(b),b)try{const g=await O(I.PRODUCTS.GET_ALL),j=(g.products||g.data||g).map(p=>({id:p._id,title:p.title,description:p.description,price:p.price,image:p.image,category:p.category,estimatedPurchaseDate:p.estimatedPurchaseDate,createdBy:typeof p.createdBy=="string"?p.createdBy:p.createdBy._id,createdAt:p.createdAt,interestedUsers:p.interestedUsers.map(k=>typeof k=="string"?k:k._id),status:p.status||"active"}));s(j),console.log("Products loaded from backend:",j.length);return}catch(g){console.warn("Failed to fetch from backend, falling back to local storage:",g)}const u=re();s(u),console.log("Products loaded from local storage:",u.length)}catch(b){l("Failed to load products"),console.error("Product fetch error:",b),m("Error","Failed to load products");try{const u=re();s(u)}catch(u){console.error("Local storage fallback failed:",u)}}finally{a(!1)}},[m]);x.useEffect(()=>{y()},[y]);const N=async b=>{try{if(a(!0),l(null),c)try{const g=await O(I.PRODUCTS.CREATE,{method:"POST",body:JSON.stringify(b)}),h=g.product||g.data||g,j={id:h._id||h.id,title:h.title,description:h.description,price:h.price,image:h.image,category:h.category,estimatedPurchaseDate:h.estimatedPurchaseDate,createdBy:h.createdBy._id||h.createdBy,createdAt:h.createdAt,interestedUsers:h.interestedUsers?.map(p=>typeof p=="string"?p:p._id)||[],status:h.status||"active"};return s(p=>[j,...p]),d("Product added","Your product has been added successfully!"),j}catch(g){if(console.warn("Backend product creation failed, using local storage:",g),g instanceof Error&&!g.message.includes("NETWORK_ERROR"))throw m("Error",g.message),g}const u=Ot(b);return s(g=>[u,...g]),d("Product added","Your product has been added successfully! (Offline mode)"),u}catch(u){const g=u.message;throw l(g),m("Error","Failed to add product"),u}finally{a(!1)}},v=async(b,u)=>{try{if(l(null),c)try{const h=await O(I.PRODUCTS.TOGGLE_INTEREST(b),{method:"POST"}),j=h.product||h.data||h,p={id:j._id||j.id,title:j.title,description:j.description,price:j.price,image:j.image,category:j.category,estimatedPurchaseDate:j.estimatedPurchaseDate,createdBy:j.createdBy._id||j.createdBy,createdAt:j.createdAt,interestedUsers:j.interestedUsers?.map(k=>typeof k=="string"?k:k._id)||[],status:j.status||"active"};s(k=>k.map(f=>f.id===b?p:f)),d(u?"Interest added":"Interest removed",u?"You are now interested in this product":"You are no longer interested in this product");return}catch(h){if(console.warn("Backend interest toggle failed, using local storage:",h),h instanceof Error&&!h.message.includes("NETWORK_ERROR"))throw m("Error",h.message),h}const g=Rt(b,u);s(h=>h.map(j=>j.id===b?g:j)),d(u?"Interest added":"Interest removed",u?"You are now interested in this product (Offline mode)":"You are no longer interested in this product (Offline mode)")}catch(g){const h=g.message;throw l(h),m("Error","Failed to update interest"),g}};return e.jsx(Be.Provider,{value:{products:o,loading:i,error:r,refreshProducts:y,addNewProduct:N,toggleInterest:v,isBackendAvailable:c},children:t})},V=()=>{const t=x.useContext(Be);if(t===void 0)throw new Error("useProducts must be used within a ProductProvider");return t},Ue=x.createContext(void 0),Mt=({children:t})=>{const[o,s]=x.useState("light");x.useEffect(()=>{const r=localStorage.getItem("bulkbuy-theme"),l=window.matchMedia("(prefers-color-scheme: dark)").matches,c=r||(l?"dark":"light");s(c),document.documentElement.classList.toggle("dark",c==="dark"),document.body.classList.toggle("dark",c==="dark")},[]);const i=r=>{s(r),localStorage.setItem("bulkbuy-theme",r),document.documentElement.classList.toggle("dark",r==="dark"),document.body.classList.toggle("dark",r==="dark")},a=()=>{i(o==="light"?"dark":"light")};return e.jsx(Ue.Provider,{value:{theme:o,toggleTheme:a,setTheme:i},children:t})},$t=()=>{const t=x.useContext(Ue);if(t===void 0)throw new Error("useTheme must be used within a ThemeProvider");return t},_e=x.createContext(void 0),Wt=[{id:"1",title:"New Interest",message:"Someone is interested in your MacBook Pro listing",type:"success",timestamp:new Date(Date.now()-1e3*60*30),read:!1},{id:"2",title:"Price Drop",message:"Sony WH-1000XM5 price dropped to $299",type:"info",timestamp:new Date(Date.now()-1e3*60*60*2),read:!1},{id:"3",title:"Group Formed",message:"Your Office Chair group has reached minimum quantity!",type:"success",timestamp:new Date(Date.now()-1e3*60*60*24),read:!0}],qt=({children:t})=>{const[o,s]=x.useState(Wt),i=o.filter(d=>!d.read).length,a=d=>{const m={...d,id:Date.now().toString(),timestamp:new Date,read:!1};s(y=>[m,...y])},r=d=>{s(m=>m.map(y=>y.id===d?{...y,read:!0}:y))},l=()=>{s(d=>d.map(m=>({...m,read:!0})))},c=d=>{s(m=>m.filter(y=>y.id!==d))},n=()=>{s([])};return e.jsx(_e.Provider,{value:{notifications:o,unreadCount:i,addNotification:a,markAsRead:r,markAllAsRead:l,removeNotification:c,clearAllNotifications:n},children:t})},Le=()=>{const t=x.useContext(_e);if(t===void 0)throw new Error("useNotifications must be used within a NotificationProvider");return t},C=({children:t,variant:o="primary",size:s="md",isLoading:i=!1,fullWidth:a=!1,leftIcon:r,rightIcon:l,className:c="",disabled:n,style:d={},...m})=>{const y="inline-flex items-center justify-center font-medium rounded-md transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 dark:focus:ring-offset-gray-800 border",N={primary:"bg-blue-600 hover:bg-blue-700 active:bg-blue-800 focus:ring-blue-500 text-white border-blue-600 hover:border-blue-700 dark:bg-blue-600 dark:hover:bg-blue-700 dark:border-blue-600",secondary:"bg-green-600 hover:bg-green-700 active:bg-green-800 focus:ring-green-500 text-white border-green-600 hover:border-green-700 dark:bg-green-600 dark:hover:bg-green-700 dark:border-green-600",outline:"bg-white hover:bg-gray-50 active:bg-gray-100 focus:ring-blue-500 text-gray-700 border-gray-300 hover:border-gray-400 dark:bg-gray-800 dark:hover:bg-gray-700 dark:text-gray-200 dark:border-gray-600 dark:hover:border-gray-500",danger:"bg-red-600 hover:bg-red-700 active:bg-red-800 focus:ring-red-500 text-white border-red-600 hover:border-red-700 dark:bg-red-600 dark:hover:bg-red-700 dark:border-red-600"},v={sm:"text-sm py-1.5 px-3 min-h-[32px]",md:"text-base py-2 px-4 min-h-[40px]",lg:"text-lg py-2.5 px-5 min-h-[48px]"},b=n||i?"opacity-50 cursor-not-allowed pointer-events-none":"cursor-pointer",u=a?"w-full":"",g=[y,N[o],v[s],b,u,c].filter(Boolean).join(" ");return e.jsxs("button",{className:g,style:d,disabled:n||i,...m,children:[i&&e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),!i&&r&&e.jsx("span",{className:"mr-2 flex items-center",children:r}),e.jsx("span",{children:t}),!i&&l&&e.jsx("span",{className:"ml-2 flex items-center",children:l})]})},Ne=()=>{const{theme:t,toggleTheme:o}=$t();return e.jsx("button",{onClick:o,className:"p-2 rounded-lg bg-gray-100 hover:bg-gray-200 dark:bg-gray-800 dark:hover:bg-gray-700 transition-colors duration-200","aria-label":`Switch to ${t==="light"?"dark":"light"} mode`,children:t==="light"?e.jsx(Ye,{className:"h-5 w-5 text-gray-600 dark:text-gray-300"}):e.jsx(Ke,{className:"h-5 w-5 text-gray-600 dark:text-gray-300"})})},Vt=({isOpen:t,onClose:o})=>{const{notifications:s,markAsRead:i,markAllAsRead:a,removeNotification:r,clearAllNotifications:l}=Le();if(!t)return null;const c=d=>{switch(d){case"success":return e.jsx(Xe,{className:"w-4 h-4 text-green-500"});case"warning":return e.jsx(Z,{className:"w-4 h-4 text-yellow-500"});case"error":return e.jsx(Z,{className:"w-4 h-4 text-red-500"});default:return e.jsx(ie,{className:"w-4 h-4 text-blue-500"})}},n=d=>{const y=new Date().getTime()-d.getTime(),N=Math.floor(y/(1e3*60)),v=Math.floor(y/(1e3*60*60)),b=Math.floor(y/(1e3*60*60*24));return b>0?`${b}d ago`:v>0?`${v}h ago`:N>0?`${N}m ago`:"Just now"};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-40",onClick:o}),e.jsxs("div",{className:"absolute right-0 mt-2 w-80 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 z-50 max-h-96 overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Notifications"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[s.length>0&&e.jsx("button",{onClick:a,className:"text-sm text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",children:"Mark all read"}),e.jsx("button",{onClick:o,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:e.jsx(z,{className:"w-5 h-5"})})]})]}),e.jsx("div",{className:"max-h-80 overflow-y-auto",children:s.length===0?e.jsxs("div",{className:"p-6 text-center text-gray-500 dark:text-gray-400",children:[e.jsx("div",{className:"w-12 h-12 mx-auto mb-3 bg-gray-100 dark:bg-gray-700 rounded-full flex items-center justify-center",children:e.jsx(ie,{className:"w-6 h-6"})}),e.jsx("p",{children:"No notifications yet"}),e.jsx("p",{className:"text-sm mt-1",children:"We'll notify you when something interesting happens"})]}):s.map(d=>e.jsx("div",{className:`p-4 border-b border-gray-100 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-750 transition-colors ${d.read?"":"bg-blue-50 dark:bg-blue-900/20"}`,onClick:()=>i(d.id),children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"flex-shrink-0 mt-1",children:c(d.type)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:`text-sm font-medium ${d.read?"text-gray-700 dark:text-gray-300":"text-gray-900 dark:text-white"}`,children:d.title}),e.jsx("button",{onClick:m=>{m.stopPropagation(),r(d.id)},className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:e.jsx(z,{className:"w-4 h-4"})})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:d.message}),e.jsxs("div",{className:"flex items-center mt-2 text-xs text-gray-500 dark:text-gray-500",children:[e.jsx(Qe,{className:"w-3 h-3 mr-1"}),n(d.timestamp),!d.read&&e.jsx("span",{className:"ml-2 w-2 h-2 bg-blue-500 rounded-full"})]})]})]})},d.id))}),s.length>0&&e.jsx("div",{className:"p-3 border-t border-gray-200 dark:border-gray-700",children:e.jsx("button",{onClick:l,className:"w-full text-sm text-gray-600 hover:text-gray-800 dark:text-gray-400 dark:hover:text-gray-200 text-center",children:"Clear all notifications"})})]})]})},ke=()=>{const{unreadCount:t}=Le(),[o,s]=x.useState(!1),i=()=>{s(!o)};return e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:i,className:"relative p-2 text-gray-600 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white transition-colors duration-200","aria-label":"Notifications",children:[e.jsx(Ze,{className:"w-6 h-6"}),t>0&&e.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center font-medium",children:t>9?"9+":t})]}),e.jsx(Vt,{isOpen:o,onClose:()=>s(!1)})]})},Ht=()=>{const{isBackendAvailable:t}=B();return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex items-center gap-1",children:t?e.jsxs(e.Fragment,{children:[e.jsx(Ce,{className:"w-4 h-4 text-green-500"}),e.jsx("span",{className:"text-xs text-green-600 dark:text-green-400 hidden sm:inline",children:"Online"})]}):e.jsxs(e.Fragment,{children:[e.jsx(Te,{className:"w-4 h-4 text-yellow-500"}),e.jsx("span",{className:"text-xs text-yellow-600 dark:text-yellow-400 hidden sm:inline",children:"Offline Mode"})]})}),!t&&e.jsxs("div",{className:"relative group cursor-help",title:"Backend server is not available. Using local storage for demo purposes.",children:[e.jsx(Z,{className:"w-4 h-4 text-yellow-500"}),e.jsx("div",{className:"absolute bottom-6 left-1/2 transform -translate-x-1/2 bg-gray-900 text-white text-xs rounded py-1 px-2 opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap z-50",children:"Backend unavailable - Demo mode"})]})]})},zt=()=>{const[t,o]=x.useState(!1),{user:s,logout:i,loading:a,isBackendAvailable:r}=B(),{isBackendAvailable:l}=V(),c=ce(),n=r&&l,d=()=>{o(!t)},m=()=>{o(!1)},y=()=>{i(),m()},v=[{title:"Home",path:"/"},{title:"Browse Products",path:"/products"},{title:"Dashboard",path:"/dashboard",requiresAuth:!0},{title:"Add Product",path:"/products/new",requiresAuth:!0}].filter(b=>!b.requiresAuth||b.requiresAuth&&s);return e.jsxs("header",{className:"bg-white dark:bg-gray-900 shadow-sm sticky top-0 z-50 transition-colors duration-200",children:[e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between items-center h-16",children:[e.jsxs("div",{className:"flex-shrink-0 flex items-center",children:[e.jsxs(E,{to:"/",className:"flex items-center",onClick:m,children:[e.jsx(F,{className:"h-8 w-8 text-blue-600 dark:text-blue-400"}),e.jsx("span",{className:"ml-2 text-xl font-bold text-gray-900 dark:text-white",children:"BulkBuy"})]}),e.jsx("div",{className:"ml-3 flex items-center",children:n?e.jsxs("div",{className:"flex items-center text-green-600 dark:text-green-400",title:"Backend Connected",children:[e.jsx(Ce,{className:"h-4 w-4"}),e.jsx("span",{className:"ml-1 text-xs hidden sm:inline",children:"Online"})]}):e.jsxs("div",{className:"flex items-center text-orange-600 dark:text-orange-400",title:"Using Local Storage",children:[e.jsx(Te,{className:"h-4 w-4"}),e.jsx("span",{className:"ml-1 text-xs hidden sm:inline",children:"Offline"})]})})]}),e.jsx("nav",{className:"hidden md:flex space-x-8",children:v.map(b=>e.jsx(E,{to:b.path,className:`inline-flex items-center px-1 pt-1 text-sm font-medium border-b-2 transition-colors ${c.pathname===b.path?"border-blue-500 text-gray-900 dark:text-white":"border-transparent text-gray-500 dark:text-gray-300 hover:border-gray-300 dark:hover:border-gray-600 hover:text-gray-700 dark:hover:text-gray-100"}`,children:b.title},b.path))}),e.jsxs("div",{className:"hidden md:flex items-center space-x-4",children:[e.jsx(Ht,{}),e.jsx(Ne,{}),a?e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("div",{className:"w-20 h-8 bg-gray-200 dark:bg-gray-600 rounded animate-pulse"}),e.jsx("div",{className:"w-16 h-8 bg-gray-200 dark:bg-gray-600 rounded animate-pulse"})]}):s?e.jsxs(e.Fragment,{children:[e.jsx(ke,{}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"h-8 w-8 rounded-full bg-gray-200 dark:bg-gray-700 ring-2 ring-gray-200 dark:ring-gray-700 flex items-center justify-center",children:e.jsx(ye,{className:"h-5 w-5 text-gray-600 dark:text-gray-300"})}),e.jsx("span",{className:"ml-2 text-sm font-medium text-gray-700 dark:text-gray-300",children:s.name})]}),e.jsx(C,{variant:"outline",size:"sm",onClick:y,children:"Logout"})]})]}):e.jsxs("div",{className:"flex space-x-3",children:[e.jsx(E,{to:"/login",children:e.jsx(C,{variant:"outline",size:"sm",children:"Login"})}),e.jsx(E,{to:"/register",children:e.jsx(C,{size:"sm",children:"Sign Up"})})]})]}),e.jsxs("div",{className:"md:hidden flex items-center space-x-2",children:[e.jsx(Ne,{}),e.jsxs("button",{onClick:d,className:"inline-flex items-center justify-center p-2 rounded-md text-gray-400 dark:text-gray-300 hover:text-gray-500 dark:hover:text-gray-100 hover:bg-gray-100 dark:hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-blue-500 transition-colors",children:[e.jsx("span",{className:"sr-only",children:"Open main menu"}),t?e.jsx(z,{className:"block h-6 w-6","aria-hidden":"true"}):e.jsx(et,{className:"block h-6 w-6","aria-hidden":"true"})]})]})]})}),t&&e.jsxs("div",{className:"md:hidden bg-white dark:bg-gray-900 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"pt-2 pb-3 space-y-1",children:v.map(b=>e.jsx(E,{to:b.path,className:`block pl-3 pr-4 py-2 border-l-4 text-base font-medium transition-colors ${c.pathname===b.path?"bg-blue-50 dark:bg-blue-900/20 border-blue-500 text-blue-700 dark:text-blue-300":"border-transparent text-gray-500 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-800 hover:border-gray-300 dark:hover:border-gray-600 hover:text-gray-700 dark:hover:text-gray-100"}`,onClick:m,children:b.title},b.path))}),e.jsx("div",{className:"pt-4 pb-3 border-t border-gray-200 dark:border-gray-700",children:a?e.jsxs("div",{className:"px-4 py-2 space-y-2",children:[e.jsx("div",{className:"h-10 bg-gray-200 dark:bg-gray-600 rounded animate-pulse"}),e.jsx("div",{className:"h-10 bg-gray-200 dark:bg-gray-600 rounded animate-pulse"})]}):s?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center px-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"h-10 w-10 rounded-full bg-gray-200 dark:bg-gray-700 ring-2 ring-gray-200 dark:ring-gray-700 flex items-center justify-center",children:e.jsx(ye,{className:"h-6 w-6 text-gray-600 dark:text-gray-300"})})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("div",{className:"text-base font-medium text-gray-800 dark:text-white",children:s.name}),e.jsx("div",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:s.email})]}),e.jsx("div",{className:"ml-auto",children:e.jsx(ke,{})})]}),e.jsx("div",{className:"mt-3 space-y-1",children:e.jsx("button",{onClick:y,className:"block w-full text-left px-4 py-2 text-base font-medium text-gray-500 dark:text-gray-300 hover:text-gray-800 dark:hover:text-gray-100 hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",children:"Logout"})})]}):e.jsxs("div",{className:"px-4 py-2 space-y-2",children:[e.jsx(E,{to:"/login",className:"block text-center w-full py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 transition-colors",onClick:m,children:"Login"}),e.jsx(E,{to:"/register",className:"block text-center w-full py-2 px-4 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",onClick:m,children:"Sign Up"})]})})]})]})},Gt=()=>e.jsx("footer",{className:"bg-gray-800 dark:bg-gray-950 text-white border-t border-gray-700 dark:border-gray-800",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[e.jsxs("div",{className:"col-span-1 md:col-span-1",children:[e.jsxs(E,{to:"/",className:"flex items-center",children:[e.jsx(F,{className:"h-8 w-8 text-blue-400"}),e.jsx("span",{className:"ml-2 text-xl font-bold",children:"BulkBuy"})]}),e.jsx("p",{className:"mt-4 text-sm text-gray-300",children:"Join forces with others to get better deals through collective purchasing power."}),e.jsxs("div",{className:"mt-6 flex space-x-4",children:[e.jsxs("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors",children:[e.jsx("span",{className:"sr-only",children:"Facebook"}),e.jsx(tt,{className:"h-6 w-6"})]}),e.jsxs("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors",children:[e.jsx("span",{className:"sr-only",children:"Twitter"}),e.jsx(rt,{className:"h-6 w-6"})]}),e.jsxs("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors",children:[e.jsx("span",{className:"sr-only",children:"Instagram"}),e.jsx(st,{className:"h-6 w-6"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Quick Links"}),e.jsxs("ul",{className:"space-y-2",children:[e.jsx("li",{children:e.jsx(E,{to:"/",className:"text-gray-300 hover:text-white transition-colors",children:"Home"})}),e.jsx("li",{children:e.jsx(E,{to:"/products",className:"text-gray-300 hover:text-white transition-colors",children:"Browse Products"})}),e.jsx("li",{children:e.jsx(E,{to:"/dashboard",className:"text-gray-300 hover:text-white transition-colors",children:"Dashboard"})}),e.jsx("li",{children:e.jsx(E,{to:"/products/new",className:"text-gray-300 hover:text-white transition-colors",children:"Add Product"})})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Resources"}),e.jsxs("ul",{className:"space-y-2",children:[e.jsx("li",{children:e.jsx("a",{href:"#",className:"text-gray-300 hover:text-white transition-colors",children:"How It Works"})}),e.jsx("li",{children:e.jsx("a",{href:"#",className:"text-gray-300 hover:text-white transition-colors",children:"FAQs"})}),e.jsx("li",{children:e.jsx("a",{href:"#",className:"text-gray-300 hover:text-white transition-colors",children:"Blog"})}),e.jsx("li",{children:e.jsx("a",{href:"#",className:"text-gray-300 hover:text-white transition-colors",children:"Success Stories"})})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Contact Us"}),e.jsxs("p",{className:"text-gray-300 flex items-center",children:[e.jsx(ee,{className:"h-5 w-5 mr-2"}),"dibyadyutidas0@gmail.com"]}),e.jsx("p",{className:"mt-4 text-sm text-gray-300",children:"We'd love to hear from you! Send us your questions, feedback, or partnership inquiries."})]})]}),e.jsx("div",{className:"mt-12 pt-8 border-t border-gray-700",children:e.jsxs("p",{className:"text-center text-gray-400 text-sm",children:["© ",new Date().getFullYear()," BulkBuy. All rights reserved."]})})]})}),Jt=({children:t})=>e.jsxs("div",{className:"flex flex-col min-h-screen bg-white dark:bg-gray-900 transition-colors duration-200",children:[e.jsx(zt,{}),e.jsx("main",{className:"flex-grow bg-gray-50 dark:bg-gray-900",children:t}),e.jsx(Gt,{})]});class Yt extends x.Component{constructor(o){super(o),this.state={hasError:!1}}static getDerivedStateFromError(o){return{hasError:!0,error:o}}componentDidCatch(o,s){console.error("ErrorBoundary caught an error:",o,s),this.setState({error:o,errorInfo:s})}handleRetry=()=>{this.setState({hasError:!1,error:void 0,errorInfo:void 0})};handleGoHome=()=>{window.location.href="/"};render(){return this.state.hasError?this.props.fallback?this.props.fallback:e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center px-4",children:e.jsxs("div",{className:"max-w-md w-full bg-white dark:bg-gray-800 shadow-lg rounded-lg p-6 text-center",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx(Ee,{className:"h-12 w-12 text-red-500"})}),e.jsx("h1",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"Oops! Something went wrong"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"We're sorry, but something unexpected happened. Please try refreshing the page or go back to the home page."}),!1,e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[e.jsx(C,{onClick:this.handleRetry,leftIcon:e.jsx(at,{size:16}),variant:"primary",children:"Try Again"}),e.jsx(C,{onClick:this.handleGoHome,leftIcon:e.jsx(ot,{size:16}),variant:"secondary",children:"Go Home"})]})]})}):this.props.children}}const Fe=t=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(t),Me=t=>{const o=new Date(t);return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric"}).format(o)},Kt=(...t)=>t.filter(Boolean).join(" "),M=t=>t?t.replace(/[<>"'/\\]/g,"").replace(/\s+/g," ").trim().substring(0,100):"",X=({className:t,variant:o="rectangular",width:s,height:i,animate:a=!0})=>{const r=Kt("bg-gray-200 dark:bg-gray-700",a&&"animate-pulse",o==="circular"&&"rounded-full",o==="rounded"&&"rounded",o==="rectangular"&&"rounded-sm",o==="text"&&"rounded-md h-4",t),l={width:typeof s=="number"?`${s}px`:s,height:typeof i=="number"?`${i}px`:i};return e.jsx("div",{className:r,style:l})},Se=({children:t})=>{const{user:o,loading:s}=B(),i=ce();return s?e.jsx("div",{className:"p-8 max-w-4xl mx-auto",children:e.jsxs("div",{className:"space-y-6",children:[e.jsx(X,{variant:"rectangular",height:48}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(6)].map((a,r)=>e.jsxs("div",{className:"space-y-3",children:[e.jsx(X,{variant:"rectangular",height:200}),e.jsx(X,{variant:"text"}),e.jsx(X,{variant:"text",width:"60%"})]},r))})]})}):o?t:e.jsx(Pe,{to:"/login",state:{from:i},replace:!0})},Qt=({children:t,className:o="",hover:s=!1,onClick:i})=>{const a=s?"transform transition duration-200 hover:translate-y-[-4px] hover:shadow-lg cursor-pointer":"";return e.jsx("div",{className:`
        bg-white dark:bg-gray-700 rounded-lg shadow-md overflow-hidden transition-colors duration-200
        ${a}
        ${o}
      `,onClick:i,children:t})},Xt=({src:t,alt:o,className:s="",fallbackSrc:i="https://images.pexels.com/photos/4483610/pexels-photo-4483610.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1",enableZoom:a=!1,lazy:r=!0})=>{const[l,c]=x.useState(t),[n,d]=x.useState(!0),[m,y]=x.useState(!1),[N,v]=x.useState(!1),b=x.useRef(null),u=()=>{l!==i?c(i):y(!0),d(!1)},g=()=>{d(!1),y(!1)},h=()=>{a&&v(!0)},j=()=>{a&&v(!1)};return m?e.jsx("div",{className:`flex items-center justify-center bg-gray-200 dark:bg-gray-700 ${s}`,children:e.jsxs("div",{className:"text-center text-gray-500 dark:text-gray-400",children:[e.jsx(pe,{className:"h-12 w-12 mx-auto mb-2"}),e.jsx("p",{className:"text-sm",children:"Image not available"})]})}):e.jsxs("div",{className:`relative overflow-hidden ${s} ${a?"cursor-zoom-in":""}`,onMouseEnter:h,onMouseLeave:j,children:[n&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-200 dark:bg-gray-700 animate-pulse",children:e.jsx("div",{className:"text-gray-400 dark:text-gray-500",children:e.jsx(pe,{className:"h-8 w-8"})})}),e.jsx("img",{ref:b,src:l,alt:M(o),className:`w-full h-full object-cover transition-transform duration-300 ${N?"scale-110":"scale-100"} ${n?"opacity-0":"opacity-100"}`,onError:u,onLoad:g,loading:r?"lazy":"eager"}),a&&!n&&e.jsx("div",{className:"absolute top-2 right-2 bg-black bg-opacity-50 text-white p-1 rounded opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(nt,{className:"h-4 w-4"})})]})},$e=({current:t,target:o,label:s,showNumbers:i=!0,className:a="",variant:r="default"})=>{const l=Math.min(t/o*100,100),c={default:"bg-blue-600",success:"bg-green-600",warning:"bg-yellow-600",danger:"bg-red-600"},d=l>=100?"success":l>=75?"warning":r;return e.jsxs("div",{className:`w-full ${a}`,children:[(s||i)&&e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[s&&e.jsxs("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center",children:[e.jsx(_,{className:"h-4 w-4 mr-1"}),s]}),i&&e.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:[t," / ",o]})]}),e.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2.5",children:e.jsx("div",{className:`h-2.5 rounded-full transition-all duration-300 ease-out ${c[d]}`,style:{width:`${l}%`}})}),l>=100&&e.jsx("div",{className:"mt-1 text-xs text-green-600 dark:text-green-400 font-medium",children:"✓ Minimum quantity reached!"})]})},ae=({product:t,showInterestCount:o=!0,showProgress:s=!0})=>{const i=$(),a=ue(t.createdBy),r=t.interestedUsers.length,l=5,c=()=>{i(`/products/${t.id}`)},n=d=>{d.stopPropagation(),console.log("Add to wishlist:",t.id)};return e.jsxs(Qt,{hover:!0,onClick:c,className:"h-full flex flex-col group",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Xt,{src:t.image,alt:t.title,className:"h-48 w-full",enableZoom:!0,lazy:!0}),e.jsx("button",{onClick:n,className:"absolute top-2 right-2 p-2 bg-white dark:bg-gray-800 rounded-full shadow-md opacity-0 group-hover:opacity-100 transition-opacity duration-200 hover:bg-gray-50 dark:hover:bg-gray-700",children:e.jsx(it,{className:"w-4 h-4 text-gray-600 dark:text-gray-300"})}),o&&r>0&&e.jsxs("div",{className:"absolute top-2 left-2 bg-blue-600 text-white text-xs font-bold px-2 py-1 rounded-full flex items-center",children:[e.jsx(_,{className:"w-3 h-3 mr-1"}),r," interested"]})]}),e.jsxs("div",{className:"p-4 flex-grow flex flex-col",children:[e.jsx("div",{className:"mb-2",children:e.jsx("span",{className:"inline-block px-2 py-1 text-xs font-semibold bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-200 rounded-full",children:t.category})}),e.jsx("h3",{className:"text-lg font-semibold mb-1 text-gray-900 dark:text-white line-clamp-2",children:t.title}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm mb-2 line-clamp-2 flex-grow",children:t.description}),s&&e.jsx("div",{className:"mb-3",children:e.jsx($e,{current:r,target:l,label:"Group Progress",showNumbers:!1})}),e.jsxs("div",{className:"mt-auto",children:[e.jsx("div",{className:"text-xl font-bold text-gray-900 dark:text-white mb-3",children:Fe(t.price)}),e.jsxs("div",{className:"pt-3 border-t border-gray-200 dark:border-gray-700 flex items-center justify-between text-xs text-gray-500 dark:text-gray-400",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("img",{src:a?.avatar,alt:M(a?.name),className:"h-5 w-5 rounded-full mr-1"}),e.jsx("span",{children:a?.name||"Anonymous"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(De,{className:"h-3 w-3 mr-1"}),e.jsx("span",{children:Me(t.estimatedPurchaseDate)})]})]})]})]})]})},Zt=()=>{const{products:t,loading:o}=V(),{user:s}=B(),i=[...t].sort((a,r)=>new Date(r.createdAt).getTime()-new Date(a.createdAt).getTime()).slice(0,3);return e.jsxs("div",{children:[e.jsx("section",{className:"bg-gradient-to-r from-blue-600 to-indigo-700 py-20 px-4 sm:px-6 lg:px-8 text-white",children:e.jsx("div",{className:"max-w-5xl mx-auto",children:e.jsxs("div",{className:"text-center md:text-left md:flex md:items-center md:justify-between",children:[e.jsxs("div",{className:"md:w-7/12",children:[e.jsxs("h1",{className:"text-4xl md:text-5xl font-bold mb-6 leading-tight",children:["Save More By ",e.jsx("span",{className:"text-yellow-300",children:"Buying Together"})]}),e.jsx("p",{className:"text-xl md:text-2xl mb-8 text-blue-100",children:"Connect with others who want to buy the same products and unlock bulk discounts through collective purchasing power."}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-center md:justify-start space-y-4 sm:space-y-0 sm:space-x-4",children:[e.jsx(E,{to:"/products",children:e.jsx(C,{size:"lg",className:"w-full sm:w-auto",children:"Browse Products"})}),!s&&e.jsx(E,{to:"/register",children:e.jsx(C,{variant:"outline",size:"lg",className:"w-full sm:w-auto bg-transparent border-white text-white hover:bg-white hover:text-blue-700",children:"Sign Up for Free"})}),s&&e.jsx(E,{to:"/dashboard",children:e.jsx(C,{variant:"outline",size:"lg",className:"w-full sm:w-auto bg-transparent border-white text-white hover:bg-white hover:text-blue-700",children:"Go to Dashboard"})})]})]}),e.jsx("div",{className:"hidden md:block md:w-5/12",children:e.jsx("img",{src:"https://images.pexels.com/photos/3184422/pexels-photo-3184422.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1",alt:"People shopping together",className:"rounded-lg shadow-2xl transform -rotate-3 border-4 border-white"})})]})})}),e.jsx("section",{className:"py-16 px-4 sm:px-6 lg:px-8 bg-gray-50 dark:bg-gray-800",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-4",children:"How BulkBuy Works"}),e.jsx("p",{className:"text-xl text-gray-600 dark:text-gray-300 max-w-3xl mx-auto",children:"Join forces with other buyers to get better deals through the power of bulk purchasing."})]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-700 p-6 rounded-lg shadow-md text-center transition-colors duration-200",children:[e.jsx("div",{className:"w-16 h-16 bg-blue-100 dark:bg-blue-900 text-blue-600 dark:text-blue-400 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(F,{className:"w-8 h-8"})}),e.jsx("h3",{className:"text-xl font-semibold mb-2 text-gray-900 dark:text-white",children:"1. Add Products"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Add products you plan to purchase in the future to your wishlist."})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-700 p-6 rounded-lg shadow-md text-center transition-colors duration-200",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 dark:bg-green-900 text-green-600 dark:text-green-400 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(_,{className:"w-8 h-8"})}),e.jsx("h3",{className:"text-xl font-semibold mb-2 text-gray-900 dark:text-white",children:"2. Match with Others"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Get matched with other users interested in buying the same products."})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-700 p-6 rounded-lg shadow-md text-center transition-colors duration-200",children:[e.jsx("div",{className:"w-16 h-16 bg-orange-100 dark:bg-orange-900 text-orange-600 dark:text-orange-400 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(fe,{className:"w-8 h-8"})}),e.jsx("h3",{className:"text-xl font-semibold mb-2 text-gray-900 dark:text-white",children:"3. Save Together"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Join forces to place bulk orders and enjoy significant discounts."})]})]})]})}),e.jsx("section",{className:"py-16 px-4 sm:px-6 lg:px-8 bg-white dark:bg-gray-900",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Recent Products"}),e.jsx(E,{to:"/products",children:e.jsx(C,{variant:"outline",size:"sm",children:"View All"})})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:o?[...Array(3)].map((a,r)=>e.jsxs("div",{className:"bg-white dark:bg-gray-700 rounded-lg shadow-md overflow-hidden",children:[e.jsx("div",{className:"h-48 bg-gray-200 dark:bg-gray-600 animate-pulse"}),e.jsxs("div",{className:"p-4",children:[e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-600 rounded animate-pulse mb-2 w-1/4"}),e.jsx("div",{className:"h-6 bg-gray-200 dark:bg-gray-600 rounded animate-pulse mb-2"}),e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-600 rounded animate-pulse mb-2 w-3/4"}),e.jsx("div",{className:"h-6 bg-gray-200 dark:bg-gray-600 rounded animate-pulse mt-4 w-1/3"})]})]},r)):i.length>0?i.map(a=>e.jsx(ae,{product:a},a.id)):e.jsxs("div",{className:"col-span-3 text-center py-12",children:[e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No products available yet. Be the first to add one!"}),e.jsx(E,{to:"/products/new",className:"mt-4 inline-block",children:e.jsx(C,{children:"Add Product"})})]})})]})}),e.jsx("section",{className:"py-16 px-4 sm:px-6 lg:px-8 bg-gray-50 dark:bg-gray-800",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-4",children:"Why Choose BulkBuy?"}),e.jsx("p",{className:"text-xl text-gray-600 dark:text-gray-300 max-w-3xl mx-auto",children:"We're revolutionizing how people purchase products by harnessing the power of community."})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[e.jsx("div",{className:"bg-white dark:bg-gray-700 p-6 rounded-lg shadow-md transition-colors duration-200",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"bg-blue-100 dark:bg-blue-900 p-3 rounded-lg mr-4",children:e.jsx(lt,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold mb-2 text-gray-900 dark:text-white",children:"Save 15-40% on Average"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Users typically save between 15-40% on their purchases by joining forces with others. The more people join, the bigger the discount."})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-700 p-6 rounded-lg shadow-md transition-colors duration-200",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"bg-green-100 dark:bg-green-900 p-3 rounded-lg mr-4",children:e.jsx(_,{className:"w-6 h-6 text-green-600 dark:text-green-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold mb-2 text-gray-900 dark:text-white",children:"Growing Community"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Join thousands of smart shoppers who are already using BulkBuy to save money on their purchases."})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-700 p-6 rounded-lg shadow-md transition-colors duration-200",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"bg-purple-100 dark:bg-purple-900 p-3 rounded-lg mr-4",children:e.jsx(fe,{className:"w-6 h-6 text-purple-600 dark:text-purple-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold mb-2 text-gray-900 dark:text-white",children:"Simple Process"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Our platform makes it easy to find others interested in the same products and coordinate bulk purchases."})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-700 p-6 rounded-lg shadow-md transition-colors duration-200",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"bg-orange-100 dark:bg-orange-900 p-3 rounded-lg mr-4",children:e.jsx(F,{className:"w-6 h-6 text-orange-600 dark:text-orange-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold mb-2 text-gray-900 dark:text-white",children:"Wide Range of Products"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"From electronics to furniture, find group buying opportunities across multiple categories."})]})]})})]})]})}),e.jsx("section",{className:"py-16 px-4 sm:px-6 lg:px-8 bg-blue-600 text-white",children:e.jsxs("div",{className:"max-w-5xl mx-auto text-center",children:[e.jsx("h2",{className:"text-3xl font-bold mb-4",children:s?"Continue Your Journey":"Ready to Start Saving?"}),e.jsx("p",{className:"text-xl mb-8 text-blue-100",children:s?"Explore more products and find great deals through group buying.":"Join BulkBuy today and connect with others to unlock the power of collective purchasing."}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-center space-y-4 sm:space-y-0 sm:space-x-4",children:[!s&&e.jsx(E,{to:"/register",children:e.jsx(C,{size:"lg",className:"bg-white text-blue-600 hover:bg-blue-50 w-full sm:w-auto",children:"Sign Up Now"})}),s&&e.jsx(E,{to:"/dashboard",children:e.jsx(C,{size:"lg",className:"bg-white text-blue-600 hover:bg-blue-50 w-full sm:w-auto",children:"Go to Dashboard"})}),e.jsx(E,{to:"/products",children:e.jsx(C,{variant:"outline",size:"lg",className:"bg-transparent border-white text-white hover:bg-white hover:text-blue-700 w-full sm:w-auto",children:"Browse Products"})})]})]})})]})},L=({className:t="",variant:o="rectangular",width:s,height:i,lines:a=1})=>{const r="animate-pulse bg-gray-200 dark:bg-gray-700",l={text:"h-4 rounded",rectangular:"rounded-md",circular:"rounded-full"},c={width:s||"100%",height:i||(o==="text"?"1rem":"100%")};return o==="text"&&a>1?e.jsx("div",{className:`space-y-2 ${t}`,children:Array.from({length:a}).map((n,d)=>e.jsx("div",{className:`${r} ${l[o]}`,style:{...c,width:d===a-1?"75%":"100%"}},d))}):e.jsx("div",{className:`${r} ${l[o]} ${t}`,style:c})},er=()=>e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden",children:[e.jsx(L,{height:"192px",className:"w-full"}),e.jsxs("div",{className:"p-4 space-y-3",children:[e.jsx(L,{width:"80px",height:"20px",className:"rounded-full"}),e.jsx(L,{height:"24px"}),e.jsx(L,{variant:"text",lines:2}),e.jsx(L,{width:"100px",height:"28px"}),e.jsxs("div",{className:"pt-3 border-t border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(L,{variant:"circular",width:"20px",height:"20px"}),e.jsx(L,{width:"80px",height:"16px"})]}),e.jsx(L,{width:"120px",height:"16px"})]})]})]}),tr=({products:t,loading:o=!1,emptyMessage:s="No products found"})=>o?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:[...Array(8)].map((i,a)=>e.jsx(er,{},a))}):t.length===0?e.jsx("div",{className:"text-center py-12",children:e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsx("div",{className:"bg-gray-100 dark:bg-gray-800 rounded-full w-24 h-24 flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-12 h-12 text-gray-400 dark:text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2M4 13h2m13-8V4a1 1 0 00-1-1H7a1 1 0 00-1 1v1m8 0V4a1 1 0 00-1-1H9a1 1 0 00-1 1v1"})})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No products found"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:s})]})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:t.map(i=>e.jsx(ae,{product:i},i.id))}),rr=({filters:t,onFiltersChange:o,categories:s})=>{const[i,a]=x.useState(!1),r=(n,d)=>{o({...t,[n]:d})},l=()=>{o({searchTerm:"",category:"",minPrice:"",maxPrice:"",startDate:"",endDate:"",sortBy:"newest"})},c=Object.values(t).some(n=>n!==""&&n!=="newest");return e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-4 mb-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(dt,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"text",value:t.searchTerm,onChange:n=>r("searchTerm",n.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md leading-5 bg-white dark:bg-gray-700 placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-blue-500 focus:border-blue-500 sm:text-sm text-gray-900 dark:text-white",placeholder:"Search products..."})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(C,{variant:"outline",leftIcon:e.jsx(ct,{size:18}),onClick:()=>a(!i),className:i?"bg-blue-50 dark:bg-blue-900/20 border-blue-300 dark:border-blue-600":"",children:"Filters"}),c&&e.jsx(C,{variant:"outline",leftIcon:e.jsx(z,{size:18}),onClick:l,className:"text-red-600 hover:text-red-700 border-red-300 hover:border-red-400",children:"Clear"})]})]}),i&&e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[e.jsx(mt,{className:"inline h-4 w-4 mr-1"}),"Category"]}),e.jsxs("select",{value:t.category,onChange:n=>r("category",n.target.value),className:"block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"",children:"All Categories"}),s.map(n=>e.jsx("option",{value:n,children:n},n))]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[e.jsx(xt,{className:"inline h-4 w-4 mr-1"}),"Price Range"]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("input",{type:"number",value:t.minPrice,onChange:n=>r("minPrice",n.target.value),placeholder:"Min",className:"block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}),e.jsx("input",{type:"number",value:t.maxPrice,onChange:n=>r("maxPrice",n.target.value),placeholder:"Max",className:"block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[e.jsx(De,{className:"inline h-4 w-4 mr-1"}),"Purchase Date"]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("input",{type:"date",value:t.startDate,onChange:n=>r("startDate",n.target.value),className:"block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}),e.jsx("input",{type:"date",value:t.endDate,onChange:n=>r("endDate",n.target.value),className:"block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Sort By"}),e.jsxs("select",{value:t.sortBy,onChange:n=>r("sortBy",n.target.value),className:"block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"newest",children:"Newest First"}),e.jsx("option",{value:"oldest",children:"Oldest First"}),e.jsx("option",{value:"price-low",children:"Price: Low to High"}),e.jsx("option",{value:"price-high",children:"Price: High to Low"}),e.jsx("option",{value:"popularity",children:"Most Popular"}),e.jsx("option",{value:"deadline",children:"Purchase Deadline"})]})]})]})})]})},sr=()=>{const{products:t,loading:o}=V(),{user:s}=B(),[i,a]=x.useState(t),[r,l]=x.useState({searchTerm:"",category:"",minPrice:"",maxPrice:"",startDate:"",endDate:"",sortBy:"newest"}),c=[...new Set(t.map(n=>n.category))];return x.useEffect(()=>{let n=[...t];if(r.searchTerm){const d=r.searchTerm.toLowerCase();n=n.filter(m=>m.title.toLowerCase().includes(d)||m.description.toLowerCase().includes(d))}r.category&&(n=n.filter(d=>d.category===r.category)),r.minPrice&&(n=n.filter(d=>d.price>=parseFloat(r.minPrice))),r.maxPrice&&(n=n.filter(d=>d.price<=parseFloat(r.maxPrice))),r.startDate&&(n=n.filter(d=>new Date(d.estimatedPurchaseDate)>=new Date(r.startDate))),r.endDate&&(n=n.filter(d=>new Date(d.estimatedPurchaseDate)<=new Date(r.endDate))),n.sort((d,m)=>{switch(r.sortBy){case"oldest":return new Date(d.createdAt).getTime()-new Date(m.createdAt).getTime();case"price-low":return d.price-m.price;case"price-high":return m.price-d.price;case"popularity":return m.interestedUsers.length-d.interestedUsers.length;case"deadline":return new Date(d.estimatedPurchaseDate).getTime()-new Date(m.estimatedPurchaseDate).getTime();case"newest":default:return new Date(m.createdAt).getTime()-new Date(d.createdAt).getTime()}}),a(n)},[t,r]),e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 transition-colors duration-200",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Browse Products"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Discover products others are planning to buy and join forces for better deals."})]}),s&&e.jsx("div",{className:"mt-4 md:mt-0",children:e.jsx(E,{to:"/products/new",children:e.jsx(C,{leftIcon:e.jsx(ut,{size:18}),children:"Add Product"})})})]}),e.jsx(rr,{filters:r,onFiltersChange:l,categories:c}),!o&&e.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Showing ",i.length," ",i.length===1?"product":"products",r.searchTerm&&` for "${r.searchTerm}"`,r.category&&` in ${r.category}`]}),i.length>0&&e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Sorted by: ",r.sortBy.replace("-"," ")]})]}),e.jsx(tr,{products:i,loading:o,emptyMessage:Object.values(r).some(n=>n!==""&&n!=="newest")?"No products match your filters. Try adjusting your search criteria.":"No products available yet. Be the first to add one!"})]})})},ar=({comment:t})=>{const o=ue(t.userId);if(!o)return null;const s=new Date(t.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return e.jsx("div",{className:"py-4 border-b border-gray-200 dark:border-gray-600",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("img",{src:o.avatar,alt:M(o.name),className:"h-10 w-10 rounded-full mr-3"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 dark:text-white",children:o.name}),e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:s})]}),e.jsx("p",{className:"mt-1 text-sm text-gray-700 dark:text-gray-300",children:t.text})]})]})})},or=({productId:t})=>{const{user:o,isBackendAvailable:s}=B(),{success:i,error:a}=K(),[r,l]=x.useState([]),[c,n]=x.useState(""),[d,m]=x.useState(!1),[y,N]=x.useState(!0),v=x.useCallback(async()=>{try{if(N(!0),s)try{const g=await O(I.COMMENTS.GET_BY_PRODUCT(t)),j=(g.comments||g.data||g).map(p=>({id:p._id,productId:typeof p.productId=="string"?p.productId:p.productId._id,userId:typeof p.userId=="string"?p.userId:p.userId._id,text:p.text,createdAt:p.createdAt}));l(j);return}catch(g){console.warn("Failed to fetch comments from backend, using local storage:",g)}const u=At(t);l(u)}catch(u){console.error("Failed to load comments:",u),a("Error","Failed to load comments")}finally{N(!1)}},[t,s,a]);x.useEffect(()=>{v()},[v]);const b=async u=>{if(u.preventDefault(),!o){a("Authentication required","Please sign in to post a comment");return}if(!c.trim()){a("Invalid input","Please enter a comment");return}try{if(m(!0),s)try{const h=await O(I.COMMENTS.CREATE,{method:"POST",body:JSON.stringify({text:c.trim(),productId:t})}),j=h.comment||h.data||h,p={id:j._id||j.id,productId:j.productId._id||j.productId,userId:j.userId._id||j.userId,text:j.text,createdAt:j.createdAt};l(k=>[...k,p]),n(""),i("Comment posted","Your comment has been added successfully!");return}catch(h){if(console.warn("Backend comment creation failed, using local storage:",h),h instanceof Error&&!h.message.includes("NETWORK_ERROR")){a("Error",h.message);return}}const g=Bt(t,c.trim());l(h=>[...h,g]),n(""),i("Comment posted","Your comment has been added successfully! (Offline mode)")}catch(g){console.error("Failed to add comment:",g),a("Error","Failed to post comment")}finally{m(!1)}};return y?e.jsxs("div",{className:"mt-8",children:[e.jsx("h3",{className:"text-xl font-semibold mb-4 text-gray-900 dark:text-white",children:"Discussion"}),e.jsx("div",{className:"animate-pulse space-y-4",children:[...Array(3)].map((u,g)=>e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gray-200 dark:bg-gray-700 rounded-full"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-1/4"}),e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-3/4"})]})]},g))})]}):e.jsxs("div",{className:"mt-8",children:[e.jsx("h3",{className:"text-xl font-semibold mb-4 text-gray-900 dark:text-white",children:"Discussion"}),o?e.jsx("form",{onSubmit:b,className:"mb-6",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("img",{src:o.avatar,alt:M(o.name),className:"h-10 w-10 rounded-full mr-3"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("textarea",{value:c,onChange:u=>n(u.target.value),className:"block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Add to the discussion...",rows:3,disabled:d}),e.jsx("div",{className:"mt-2 flex justify-end",children:e.jsx(C,{type:"submit",size:"sm",isLoading:d,disabled:d||!c.trim(),children:"Post Comment"})})]})]})}):e.jsx("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-md p-4 mb-6 text-center",children:e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Please sign in to join the discussion."})}),e.jsx("div",{children:r.length===0?e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-center py-8",children:"No comments yet. Be the first to start the discussion!"}):e.jsx("div",{children:r.map(u=>e.jsx(ar,{comment:u},u.id))})})]})},nr=()=>{const{id:t}=He(),o=$(),{user:s}=B(),{products:i,toggleInterest:a}=V(),{error:r}=K(),[l,c]=x.useState(i.find(g=>g.id===t)),[n,d]=x.useState(!1),m=l?ue(l.createdBy):void 0,y=s?.id===l?.createdBy,N=s&&l?.interestedUsers.includes(s.id),v=l?.interestedUsers.length||0,b=5;x.useEffect(()=>{const g=i.find(h=>h.id===t);g?c(g):i.length>0&&!g&&o("/products")},[i,t,o]);const u=async()=>{if(!s){o("/login",{state:{from:{pathname:`/products/${t}`}}});return}if(l)try{d(!0),await a(l.id,!N)}catch(g){console.error("Failed to toggle interest:",g),r("Error","Failed to update interest")}finally{d(!1)}};return l?e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("button",{onClick:()=>o("/products"),className:"flex items-center text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 mb-6 transition-colors",children:[e.jsx(G,{className:"h-4 w-4 mr-1"}),"Back to Products"]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2",children:[e.jsx("div",{className:"bg-gray-200 dark:bg-gray-700 h-64 md:h-auto",children:e.jsx("img",{src:l.image,alt:M(l.title),className:"w-full h-full object-cover",onError:g=>{const h=g.target;h.src="https://images.pexels.com/photos/4483610/pexels-photo-4483610.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1"}})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("span",{className:"inline-block px-2 py-1 text-xs font-semibold bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-200 rounded-full mb-2",children:l.category}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:l.title})]}),e.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:Fe(l.price)})]}),e.jsx("div",{className:"mt-6",children:e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:l.description})}),e.jsx("div",{className:"mt-6",children:e.jsx($e,{current:v,target:b,label:"Group Progress",showNumbers:!0})}),e.jsxs("div",{className:"mt-6 flex items-center text-sm text-gray-500 dark:text-gray-400",children:[e.jsxs("div",{className:"flex items-center mr-6",children:[e.jsx(gt,{className:"h-5 w-5 mr-1 text-blue-500 dark:text-blue-400"}),e.jsxs("span",{children:["Est. purchase: ",Me(l.estimatedPurchaseDate)]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(_,{className:"h-5 w-5 mr-1 text-green-500 dark:text-green-400"}),e.jsxs("span",{children:[v," interested"]})]})]}),e.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-600",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("img",{src:m?.avatar,alt:M(m?.name),className:"h-10 w-10 rounded-full mr-3",onError:g=>{const h=g.target;h.src="https://i.pravatar.cc/150?img=1"}}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:["Added by ",m?.name]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:new Date(l.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]})]}),!y&&e.jsx("div",{className:"mt-6",children:e.jsx(C,{onClick:u,isLoading:n,disabled:n,variant:N?"secondary":"primary",leftIcon:e.jsx(le,{size:18}),fullWidth:!0,children:N?"I'm no longer interested":"I'm interested"})}),y&&e.jsx("div",{className:"mt-6 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:[e.jsx("strong",{children:"You created this product."})," Share it with others to get more people interested!"]})})]})]})]})}),e.jsx("div",{className:"mt-8 bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden p-6",children:e.jsx(or,{productId:l.id})})]})}):e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsx("div",{className:"text-center py-16",children:e.jsxs("div",{className:"animate-pulse space-y-4",children:[e.jsx("div",{className:"h-8 bg-gray-200 dark:bg-gray-700 rounded w-1/4 mx-auto"}),e.jsx("div",{className:"h-64 bg-gray-200 dark:bg-gray-700 rounded"}),e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-3/4 mx-auto"}),e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-1/2 mx-auto"})]})})})})},R=({label:t,error:o,fullWidth:s=!1,className:i="",id:a,...r})=>{const l=a||t?.toLowerCase().replace(/\s+/g,"-");return e.jsxs("div",{className:`mb-4 ${s?"w-full":""}`,children:[t&&e.jsx("label",{htmlFor:l,className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:t}),e.jsx("input",{id:l,className:`
          px-3 py-2 bg-white dark:bg-gray-800 border shadow-sm 
          border-gray-300 dark:border-gray-600 placeholder-gray-400 dark:placeholder-gray-500
          text-gray-900 dark:text-white
          focus:outline-none focus:border-blue-500 focus:ring-blue-500 block w-full 
          rounded-md sm:text-sm focus:ring-1 
          ${o?"border-red-500 dark:border-red-400":""}
          ${i}
        `,...r}),o&&e.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:o})]})},ir=()=>{const t=$(),{addNewProduct:o}=V(),{error:s}=K(),[i,a]=x.useState(!1),[r,l]=x.useState({title:"",description:"",price:"",image:"",category:"",estimatedPurchaseDate:""}),[c,n]=x.useState({}),d=u=>{const{name:g,value:h}=u.target;l(j=>({...j,[g]:h})),c[g]&&n(j=>({...j,[g]:""}))},m=()=>{const u={};if(r.title.trim()?r.title.length<3?u.title="Title must be at least 3 characters":r.title.length>100&&(u.title="Title cannot exceed 100 characters"):u.title="Title is required",r.description.trim()?r.description.length<10?u.description="Description must be at least 10 characters":r.description.length>1e3&&(u.description="Description cannot exceed 1000 characters"):u.description="Description is required",r.price?parseFloat(r.price)<=0?u.price="Price must be greater than 0":parseFloat(r.price)>1e6&&(u.price="Price cannot exceed $1,000,000"):u.price="Price is required",r.category.trim()||(u.category="Category is required"),!r.estimatedPurchaseDate)u.estimatedPurchaseDate="Estimated purchase date is required";else{const g=new Date(r.estimatedPurchaseDate),h=new Date;h.setHours(0,0,0,0),g<=h&&(u.estimatedPurchaseDate="Estimated purchase date must be in the future")}if(r.image&&r.image.trim())try{new URL(r.image)}catch{u.image="Please enter a valid URL"}return n(u),Object.keys(u).length===0},y=async u=>{if(u.preventDefault(),!m()){s("Validation Error","Please fix the errors in the form");return}try{a(!0);const g=r.image.trim()||"https://images.pexels.com/photos/4483610/pexels-photo-4483610.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1";await o({title:r.title.trim(),description:r.description.trim(),price:parseFloat(r.price),image:g,category:r.category,estimatedPurchaseDate:r.estimatedPurchaseDate,createdBy:"anonymous"}),t("/products")}catch(g){console.error("Failed to add product:",g),s("Error","Failed to add product. Please try again.")}finally{a(!1)}},N=["Electronics","Fashion","Home & Garden","Sports","Books","Health & Beauty","Other"],v=new Date;v.setDate(v.getDate()+1);const b=v.toISOString().split("T")[0];return e.jsxs("form",{onSubmit:y,className:"space-y-6",children:[e.jsx(R,{label:"Product Title",name:"title",value:r.title,onChange:d,placeholder:"Enter product title",required:!0,fullWidth:!0,error:c.title}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Description"}),e.jsx("textarea",{id:"description",name:"description",value:r.description,onChange:d,rows:4,className:`px-3 py-2 bg-white dark:bg-gray-800 border shadow-sm border-gray-300 dark:border-gray-600 placeholder-gray-400 dark:placeholder-gray-500 text-gray-900 dark:text-white focus:outline-none focus:border-blue-500 focus:ring-blue-500 block w-full rounded-md sm:text-sm focus:ring-1 ${c.description?"border-red-500 dark:border-red-400":""}`,placeholder:"Describe the product in detail",required:!0}),c.description&&e.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:c.description})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(R,{label:"Price ($)",name:"price",type:"number",value:r.price,onChange:d,placeholder:"0.00",min:"0",step:"0.01",required:!0,fullWidth:!0,error:c.price}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Category"}),e.jsxs("select",{id:"category",name:"category",value:r.category,onChange:d,className:`px-3 py-2 bg-white dark:bg-gray-800 border shadow-sm border-gray-300 dark:border-gray-600 placeholder-gray-400 dark:placeholder-gray-500 text-gray-900 dark:text-white focus:outline-none focus:border-blue-500 focus:ring-blue-500 block w-full rounded-md sm:text-sm focus:ring-1 ${c.category?"border-red-500 dark:border-red-400":""}`,required:!0,children:[e.jsx("option",{value:"",children:"Select a category"}),N.map(u=>e.jsx("option",{value:u,children:u},u))]}),c.category&&e.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:c.category})]})]}),e.jsx(R,{label:"Image URL (optional)",name:"image",type:"url",value:r.image,onChange:d,placeholder:"https://example.com/image.jpg",fullWidth:!0,error:c.image}),e.jsx(R,{label:"Estimated Purchase Date",name:"estimatedPurchaseDate",type:"date",value:r.estimatedPurchaseDate,onChange:d,min:b,required:!0,fullWidth:!0,error:c.estimatedPurchaseDate}),e.jsxs("div",{className:"flex justify-end space-x-4",children:[e.jsx(C,{type:"button",variant:"outline",onClick:()=>t("/products"),disabled:i,children:"Cancel"}),e.jsx(C,{type:"submit",isLoading:i,disabled:i,children:"Add Product"})]})]})},lr=()=>{const t=$();return e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("button",{onClick:()=>t("/products"),className:"flex items-center text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 mb-6",children:[e.jsx(G,{className:"h-4 w-4 mr-1"}),"Back to Products"]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden p-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-6",children:"Add a Product"}),e.jsx("p",{className:"mb-6 text-gray-600 dark:text-gray-300",children:"Share a product you're planning to purchase to find others interested in buying the same item."}),e.jsx(ir,{})]})]})})},dr=({className:t=""})=>{const[o,s]=x.useState([]),[i,a]=x.useState(!0),[r,l]=x.useState(null);return x.useEffect(()=>{const c=async()=>{try{const d=await O(I.USERS.GET_ONLINE);s(d.users||[]),l(null)}catch(d){console.error("Error fetching online users:",d),l("Failed to load online users")}finally{a(!1)}};c();const n=setInterval(c,3e4);return()=>clearInterval(n)},[]),i?e.jsxs("div",{className:`bg-white dark:bg-gray-800 rounded-lg shadow-md p-4 ${t}`,children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(_,{className:"h-5 w-5 text-gray-600 dark:text-gray-400 mr-2"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Online Users"})]}),e.jsx("div",{className:"animate-pulse",children:e.jsx("div",{className:"space-y-3",children:[...Array(3)].map((c,n)=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"h-8 w-8 bg-gray-300 dark:bg-gray-600 rounded-full mr-3"}),e.jsx("div",{className:"h-4 bg-gray-300 dark:bg-gray-600 rounded w-24"})]},n))})})]}):r?e.jsxs("div",{className:`bg-white dark:bg-gray-800 rounded-lg shadow-md p-4 ${t}`,children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(_,{className:"h-5 w-5 text-gray-600 dark:text-gray-400 mr-2"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Online Users"})]}),e.jsx("p",{className:"text-red-500 dark:text-red-400 text-sm",children:r})]}):e.jsxs("div",{className:`bg-white dark:bg-gray-800 rounded-lg shadow-md p-4 ${t}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(_,{className:"h-5 w-5 text-gray-600 dark:text-gray-400 mr-2"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Online Users"})]}),e.jsxs("span",{className:"bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200 text-xs font-medium px-2.5 py-0.5 rounded-full",children:[o.length," online"]})]}),o.length===0?e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"No users currently online"}):e.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:o.map(c=>e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:c.avatar,alt:M(c.name),className:"h-8 w-8 rounded-full object-cover",onError:n=>{const d=n.target;d.src="https://via.placeholder.com/32/4A90E2/FFFFFF?text=U"}}),e.jsx(ht,{className:"absolute -bottom-1 -right-1 h-3 w-3 text-green-500 fill-current"})]}),e.jsxs("div",{className:"ml-3 min-w-0 flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:c.name}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Active now"})]})]},c._id))})]})},cr=()=>{const{user:t}=B(),{products:o,loading:s}=V(),[i,a]=x.useState([]),[r,l]=x.useState([]);return x.useEffect(()=>{if(t&&o.length>0){const c=o.filter(d=>d.createdBy===t.id);a(c);const n=o.filter(d=>d.interestedUsers.includes(t.id)&&d.createdBy!==t.id);l(n)}},[t,o]),t?e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Dashboard"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300",children:["Welcome back, ",t.name,"! Manage your products and group purchases."]})]}),e.jsx("div",{className:"mt-4 md:mt-0",children:e.jsx(E,{to:"/products/new",children:e.jsx(C,{leftIcon:e.jsx(yt,{size:18}),children:"Add Product"})})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"bg-blue-100 dark:bg-blue-900 p-3 rounded-full mr-4",children:e.jsx(F,{className:"h-6 w-6 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"My Products"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:i.length})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"bg-green-100 dark:bg-green-900 p-3 rounded-full mr-4",children:e.jsx(le,{className:"h-6 w-6 text-green-600 dark:text-green-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Interested In"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:r.length})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"bg-purple-100 dark:bg-purple-900 p-3 rounded-full mr-4",children:e.jsx(_,{className:"h-6 w-6 text-purple-600 dark:text-purple-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Potential Savings"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:r.length+i.length>0?"15-40%":"0%"})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"lg:col-span-3",children:[e.jsxs("div",{className:"mb-12",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"My Products"}),e.jsx(E,{to:"/products/new",children:e.jsx(C,{variant:"outline",size:"sm",children:"Add New"})})]}),s?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[...Array(2)].map((c,n)=>e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden",children:[e.jsx("div",{className:"h-48 bg-gray-200 dark:bg-gray-600 animate-pulse"}),e.jsxs("div",{className:"p-4",children:[e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-600 rounded animate-pulse mb-2 w-1/4"}),e.jsx("div",{className:"h-6 bg-gray-200 dark:bg-gray-600 rounded animate-pulse mb-2"}),e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-600 rounded animate-pulse mb-2 w-3/4"}),e.jsx("div",{className:"h-6 bg-gray-200 dark:bg-gray-600 rounded animate-pulse mt-4 w-1/3"})]})]},n))}):i.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:i.map(c=>e.jsx(ae,{product:c},c.id))}):e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-8 text-center",children:[e.jsx(F,{className:"h-12 w-12 text-gray-400 dark:text-gray-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No products yet"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:"Add products you're planning to purchase to find group buying opportunities."}),e.jsx(E,{to:"/products/new",children:e.jsx(C,{children:"Add Your First Product"})})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Products I'm Interested In"}),e.jsx(E,{to:"/products",children:e.jsx(C,{variant:"outline",size:"sm",children:"Browse More"})})]}),s?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[...Array(2)].map((c,n)=>e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden",children:[e.jsx("div",{className:"h-48 bg-gray-200 dark:bg-gray-600 animate-pulse"}),e.jsxs("div",{className:"p-4",children:[e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-600 rounded animate-pulse mb-2 w-1/4"}),e.jsx("div",{className:"h-6 bg-gray-200 dark:bg-gray-600 rounded animate-pulse mb-2"}),e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-600 rounded animate-pulse mb-2 w-3/4"}),e.jsx("div",{className:"h-6 bg-gray-200 dark:bg-gray-600 rounded animate-pulse mt-4 w-1/3"})]})]},n))}):r.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:r.map(c=>e.jsx(ae,{product:c},c.id))}):e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-8 text-center",children:[e.jsx(le,{className:"h-12 w-12 text-gray-400 dark:text-gray-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No interests yet"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:"Browse products and mark ones you're interested in to join group buying opportunities."}),e.jsx(E,{to:"/products",children:e.jsx(C,{children:"Browse Products"})})]})]})]}),e.jsx("div",{className:"lg:col-span-1",children:e.jsx(dr,{className:"sticky top-6"})})]})]})}):e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"text-center py-16",children:[e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Please log in to view your dashboard."}),e.jsx(E,{to:"/login",className:"mt-4 inline-block",children:e.jsx(C,{children:"Login"})})]})})})},ge=({email:t,onVerify:o,onResend:s,onBack:i,title:a="Verify Your Email",description:r="We've sent a 6-digit verification code to your email address.",loading:l=!1,error:c=null})=>{const[n,d]=x.useState(["","","","","",""]),[m,y]=x.useState(!1),[N,v]=x.useState(0),b=x.useRef([]);x.useEffect(()=>{b.current[0]?.focus()},[]),x.useEffect(()=>{if(N>0){const f=setTimeout(()=>v(N-1),1e3);return()=>clearTimeout(f)}},[N]);const u=(f,w)=>{if(w.length>1){const P=w.slice(0,6).split(""),T=[...n];P.forEach((oe,D)=>{f+D<6&&(T[f+D]=oe)}),d(T);const W=Math.min(f+P.length,5);b.current[W]?.focus();return}if(!/^\d*$/.test(w))return;const S=[...n];S[f]=w,d(S),w&&f<5&&b.current[f+1]?.focus()},g=(f,w)=>{w.key==="Backspace"&&!n[f]&&f>0&&b.current[f-1]?.focus()},h=async f=>{f.preventDefault();const w=n.join("");w.length===6&&await o(w)},j=async()=>{try{y(!0),await s(),v(60)}catch(f){console.error("Resend failed:",f)}finally{y(!1)}},k=n.join("").length===6;return e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"w-16 h-16 bg-blue-100 dark:bg-blue-900 rounded-full flex items-center justify-center",children:e.jsx(ee,{className:"h-8 w-8 text-blue-600 dark:text-blue-400"})})}),e.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900 dark:text-white",children:a}),e.jsx("p",{className:"mt-2 text-center text-sm text-gray-600 dark:text-gray-300",children:r}),e.jsx("p",{className:"mt-1 text-center text-sm font-medium text-blue-600 dark:text-blue-400",children:t})]}),e.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 py-8 px-4 shadow sm:rounded-lg sm:px-10",children:[c&&e.jsx("div",{className:"mb-4 p-4 bg-red-50 dark:bg-red-900/20 border-l-4 border-red-500 dark:border-red-400 text-red-700 dark:text-red-300",children:e.jsx("p",{children:c})}),e.jsxs("form",{onSubmit:h,children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Enter verification code"}),e.jsx("div",{className:"flex space-x-2 justify-center",children:n.map((f,w)=>e.jsx("input",{ref:S=>b.current[w]=S,type:"text",maxLength:6,value:f,onChange:S=>u(w,S.target.value),onKeyDown:S=>g(w,S),className:`w-12 h-12 text-center text-xl font-bold border border-gray-300 dark:border-gray-600 rounded-lg\r
                             bg-white dark:bg-gray-700 text-gray-900 dark:text-white\r
                             focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:focus:ring-blue-400\r
                             transition-colors duration-200`,disabled:l},w))})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(C,{type:"submit",fullWidth:!0,isLoading:l,disabled:!k,children:"Verify Code"}),e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsxs("button",{type:"button",onClick:i,className:"flex items-center text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 transition-colors",disabled:l,children:[e.jsx(G,{className:"w-4 h-4 mr-1"}),"Back"]}),e.jsxs("button",{type:"button",onClick:j,disabled:N>0||m||l,className:`flex items-center text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200 \r
                           disabled:text-gray-400 disabled:cursor-not-allowed transition-colors`,children:[e.jsx(pt,{className:`w-4 h-4 mr-1 ${m?"animate-spin":""}`}),N>0?`Resend in ${N}s`:"Resend Code"]})]})]})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Didn't receive the code? Check your spam folder or try resending."})})]})})]})},mr=()=>{const t=$(),o=ce(),{login:s,verifyEmail:i,resendVerificationOTP:a}=B(),[r,l]=x.useState(""),[c,n]=x.useState(""),[d,m]=x.useState(!1),[y,N]=x.useState(!1),[v,b]=x.useState(null),[u,g]=x.useState({}),[h,j]=x.useState("login"),[p,k]=x.useState(""),f=o.state?.from?.pathname||"/dashboard",w=o.state?.message,S=()=>{const D={};return r?/\S+@\S+\.\S+/.test(r)||(D.email="Please enter a valid email address"):D.email="Email is required",c?c.length<6&&(D.password="Password must be at least 6 characters"):D.password="Password is required",g(D),Object.keys(D).length===0},P=async D=>{if(D.preventDefault(),!!S())try{N(!0),b(null),await s(r,c),t(f,{replace:!0})}catch(A){if(A&&typeof A=="object"&&"requiresVerification"in A)k(A.email||r),j("verify");else{const he=A instanceof Error?A.message:"Login failed";b(he)}}finally{N(!1)}},T=async D=>{try{b(null),await i(p,D),t(f,{replace:!0})}catch(A){b(A.message)}},W=async()=>{try{b(null),await a(p)}catch(D){b(D.message)}},oe=()=>{j("login"),b(null)};return h==="verify"?e.jsx(ge,{email:p,onVerify:T,onResend:W,onBack:oe,title:"Verify Your Email",description:"Please verify your email before logging in.",loading:y,error:v}):e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx(F,{className:"h-12 w-12 text-blue-600 dark:text-blue-400"})}),e.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900 dark:text-white",children:"Sign in to BulkBuy"}),e.jsxs("p",{className:"mt-2 text-center text-sm text-gray-600 dark:text-gray-300",children:["Or"," ",e.jsx(E,{to:"/register",className:"font-medium text-blue-600 dark:text-blue-400 hover:text-blue-500 dark:hover:text-blue-300",children:"create a new account"})]})]}),e.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 py-8 px-4 shadow sm:rounded-lg sm:px-10",children:[w&&e.jsx("div",{className:"mb-4 p-4 bg-green-50 dark:bg-green-900/20 border-l-4 border-green-500 dark:border-green-400 text-green-700 dark:text-green-300",children:e.jsx("p",{children:w})}),v&&e.jsx("div",{className:"mb-4 p-4 bg-red-50 dark:bg-red-900/20 border-l-4 border-red-500 dark:border-red-400 text-red-700 dark:text-red-300",children:e.jsx("p",{children:v})}),e.jsxs("form",{className:"space-y-6",onSubmit:P,children:[e.jsx(R,{label:"Email address",type:"email",id:"email",value:r,onChange:D=>{l(D.target.value),u.email&&g(A=>({...A,email:void 0}))},autoComplete:"email",required:!0,fullWidth:!0,error:u.email}),e.jsxs("div",{className:"relative",children:[e.jsx(R,{label:"Password",type:d?"text":"password",id:"password",value:c,onChange:D=>{n(D.target.value),u.password&&g(A=>({...A,password:void 0}))},autoComplete:"current-password",required:!0,fullWidth:!0,error:u.password}),e.jsx("button",{type:"button",className:"absolute right-3 top-9 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",onClick:()=>m(!d),children:d?e.jsx(ft,{size:20}):e.jsx(bt,{size:20})})]}),e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("div",{className:"text-sm",children:e.jsx(E,{to:"/forgot-password",className:"font-medium text-blue-600 dark:text-blue-400 hover:text-blue-500 dark:hover:text-blue-300",children:"Forgot your password?"})})}),e.jsx("div",{children:e.jsx(C,{type:"submit",fullWidth:!0,isLoading:y,leftIcon:e.jsx(jt,{size:18}),children:"Sign in"})})]}),e.jsxs("div",{className:"mt-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-gray-300"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"px-2 bg-white text-gray-500",children:"For demo purposes"})})]}),e.jsxs("div",{className:"mt-6 grid grid-cols-1 gap-3",children:[e.jsx("button",{type:"button",onClick:()=>{l("john@example.com"),n("password")},className:"w-full flex justify-center py-2 px-4 border border-gray-300 rounded-md shadow-sm bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Use demo account: John"}),e.jsx("button",{type:"button",onClick:()=>{l("jane@example.com"),n("password")},className:"w-full flex justify-center py-2 px-4 border border-gray-300 rounded-md shadow-sm bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Use demo account: Jane"})]})]})]})})]})},xr=()=>{const t=$(),{register:o,verifyEmail:s,resendVerificationOTP:i}=B(),[a,r]=x.useState(""),[l,c]=x.useState(""),[n,d]=x.useState(""),[m,y]=x.useState(""),[N,v]=x.useState(!1),[b,u]=x.useState(null),[g,h]=x.useState("register"),[j,p]=x.useState(""),k=async P=>{P.preventDefault();try{if(v(!0),u(null),n!==m)throw new Error("Passwords do not match");if(n.length<6)throw new Error("Password must be at least 6 characters");const T=await o(a,l,n);T.requiresVerification?(p(T.email||l),h("verify")):t("/dashboard")}catch(T){if(T&&typeof T=="object"&&"requiresVerification"in T)p(T.email||l),h("verify");else{const W=T instanceof Error?T.message:"Registration failed";u(W)}}finally{v(!1)}},f=async P=>{try{u(null),await s(j,P),t("/dashboard")}catch(T){u(T.message)}},w=async()=>{try{u(null),await i(j)}catch(P){u(P.message)}},S=()=>{h("register"),u(null)};return g==="verify"?e.jsx(ge,{email:j,onVerify:f,onResend:w,onBack:S,title:"Verify Your Email",description:"We've sent a 6-digit verification code to your email address.",loading:N,error:b}):e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx(F,{className:"h-12 w-12 text-blue-600 dark:text-blue-400"})}),e.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900 dark:text-white",children:"Create your account"}),e.jsxs("p",{className:"mt-2 text-center text-sm text-gray-600 dark:text-gray-300",children:["Already have an account?"," ",e.jsx(E,{to:"/login",className:"font-medium text-blue-600 dark:text-blue-400 hover:text-blue-500 dark:hover:text-blue-300",children:"Sign in"})]})]}),e.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 py-8 px-4 shadow sm:rounded-lg sm:px-10",children:[b&&e.jsx("div",{className:"mb-4 p-4 bg-red-50 dark:bg-red-900/20 border-l-4 border-red-500 dark:border-red-400 text-red-700 dark:text-red-300",children:e.jsx("p",{children:b})}),e.jsxs("form",{className:"space-y-6",onSubmit:k,children:[e.jsx(R,{label:"Full name",type:"text",id:"name",value:a,onChange:P=>r(P.target.value),autoComplete:"name",required:!0,fullWidth:!0}),e.jsx(R,{label:"Email address",type:"email",id:"email",value:l,onChange:P=>c(P.target.value),autoComplete:"email",required:!0,fullWidth:!0}),e.jsx(R,{label:"Password",type:"password",id:"password",value:n,onChange:P=>d(P.target.value),autoComplete:"new-password",required:!0,fullWidth:!0}),e.jsx(R,{label:"Confirm password",type:"password",id:"confirmPassword",value:m,onChange:P=>y(P.target.value),autoComplete:"new-password",required:!0,fullWidth:!0}),e.jsx("div",{children:e.jsx(C,{type:"submit",fullWidth:!0,isLoading:N,leftIcon:e.jsx(wt,{size:18}),children:"Create account"})})]}),e.jsx("div",{className:"mt-6",children:e.jsxs("p",{className:"text-center text-xs text-gray-600",children:["By creating an account, you agree to the"," ",e.jsx("a",{href:"#",className:"font-medium text-blue-600 hover:underline",children:"Terms of Service"})," ","and"," ",e.jsx("a",{href:"#",className:"font-medium text-blue-600 hover:underline",children:"Privacy Policy"})]})})]})})]})},ur=()=>{const t=$(),{forgotPassword:o,verifyResetOTP:s,resetPassword:i}=B(),[a,r]=x.useState(""),[l,c]=x.useState(""),[n,d]=x.useState(""),[m,y]=x.useState(!1),[N,v]=x.useState(null),[b,u]=x.useState("email"),[g,h]=x.useState(""),j=async P=>{P.preventDefault();try{y(!0),v(null),await o(a),u("verify")}catch(T){v(T.message)}finally{y(!1)}},p=async P=>{try{v(null);const T=await s(a,P);h(T.resetToken),u("reset")}catch(T){v(T.message)}},k=async()=>{try{v(null),await o(a)}catch(P){v(P.message)}},f=async P=>{P.preventDefault();try{if(y(!0),v(null),l!==n)throw new Error("Passwords do not match");if(l.length<6)throw new Error("Password must be at least 6 characters");await i(a,g,l),t("/login",{state:{message:"Password reset successfully! Please log in with your new password."}})}catch(T){v(T.message)}finally{y(!1)}},w=()=>{u("email"),v(null)},S=()=>{u("verify"),v(null)};return b==="verify"?e.jsx(ge,{email:a,onVerify:p,onResend:k,onBack:w,title:"Verify Reset Code",description:"We've sent a 6-digit reset code to your email address.",loading:m,error:N}):b==="reset"?e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx(be,{className:"h-12 w-12 text-blue-600 dark:text-blue-400"})}),e.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900 dark:text-white",children:"Reset Your Password"}),e.jsx("p",{className:"mt-2 text-center text-sm text-gray-600 dark:text-gray-300",children:"Enter your new password below"})]}),e.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 py-8 px-4 shadow sm:rounded-lg sm:px-10",children:[N&&e.jsx("div",{className:"mb-4 p-4 bg-red-50 dark:bg-red-900/20 border-l-4 border-red-500 dark:border-red-400 text-red-700 dark:text-red-300",children:e.jsx("p",{children:N})}),e.jsxs("form",{className:"space-y-6",onSubmit:f,children:[e.jsx(R,{label:"New password",type:"password",id:"newPassword",value:l,onChange:P=>c(P.target.value),autoComplete:"new-password",required:!0,fullWidth:!0}),e.jsx(R,{label:"Confirm new password",type:"password",id:"confirmPassword",value:n,onChange:P=>d(P.target.value),autoComplete:"new-password",required:!0,fullWidth:!0}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(C,{type:"submit",fullWidth:!0,isLoading:m,leftIcon:e.jsx(be,{size:18}),children:"Reset Password"}),e.jsxs("button",{type:"button",onClick:S,className:"w-full flex items-center justify-center text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 transition-colors",disabled:m,children:[e.jsx(G,{className:"w-4 h-4 mr-1"}),"Back to verification"]})]})]})]})})]}):e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx(ee,{className:"h-12 w-12 text-blue-600 dark:text-blue-400"})}),e.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900 dark:text-white",children:"Forgot your password?"}),e.jsx("p",{className:"mt-2 text-center text-sm text-gray-600 dark:text-gray-300",children:"Enter your email address and we'll send you a reset code"})]}),e.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 py-8 px-4 shadow sm:rounded-lg sm:px-10",children:[N&&e.jsx("div",{className:"mb-4 p-4 bg-red-50 dark:bg-red-900/20 border-l-4 border-red-500 dark:border-red-400 text-red-700 dark:text-red-300",children:e.jsx("p",{children:N})}),e.jsxs("form",{className:"space-y-6",onSubmit:j,children:[e.jsx(R,{label:"Email address",type:"email",id:"email",value:a,onChange:P=>r(P.target.value),autoComplete:"email",required:!0,fullWidth:!0}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(C,{type:"submit",fullWidth:!0,isLoading:m,leftIcon:e.jsx(ee,{size:18}),children:"Send Reset Code"}),e.jsxs(E,{to:"/login",className:"w-full flex items-center justify-center text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 transition-colors",children:[e.jsx(G,{className:"w-4 h-4 mr-1"}),"Back to login"]})]})]})]})})]})};function gr(){return e.jsx(Yt,{children:e.jsx(ze,{basename:"/group-buying-platform",children:e.jsx(Mt,{children:e.jsx(_t,{children:e.jsx(qt,{children:e.jsx(Lt,{children:e.jsx(Ft,{children:e.jsx(Jt,{children:e.jsxs(Ge,{children:[e.jsx(U,{path:"/",element:e.jsx(Zt,{})}),e.jsx(U,{path:"/products",element:e.jsx(sr,{})}),e.jsx(U,{path:"/products/:id",element:e.jsx(nr,{})}),e.jsx(U,{path:"/products/new",element:e.jsx(Se,{children:e.jsx(lr,{})})}),e.jsx(U,{path:"/dashboard",element:e.jsx(Se,{children:e.jsx(cr,{})})}),e.jsx(U,{path:"/login",element:e.jsx(mr,{})}),e.jsx(U,{path:"/register",element:e.jsx(xr,{})}),e.jsx(U,{path:"/forgot-password",element:e.jsx(ur,{})}),e.jsx(U,{path:"*",element:e.jsx(Pe,{to:"/",replace:!0})})]})})})})})})})})})}St.createRoot(document.getElementById("root")).render(e.jsx(x.StrictMode,{children:e.jsx(gr,{})}));
